.TH SRP_DAEMON 1 "September 5, 2006" "OpenFabrics" "USER COMMANDS"

.SH NAME
srp_daemon \- Discover SRP targets on an InfiniBand Fabric

.SH SYNOPSIS
.B srp_daemon [-vVceo] [-d \fIumad-device\fR | -i \fIinfiniband-device\fR [-p \fIport-num\fR]] [-t \fItimoeout(ms)\fR] [-r \fIretries\fR] [-R \fIRescan-time\fR]


.SH DESCRIPTION
.PP
Discover and connect to InfiniBand SCSI RDMA Protocol (SRP) targets on an IB fabric.

Each srp_daemon instance is operating on one port. 

On boot it performs a full rescan of the fabric and afterward it waits for several srp_daemon events.

The srp_daemon events includes a join of a new machine to the fabric, a change in the capabilities of a machine, an SA change, or an expiration of a predefined timeout.

When a new machine joins the fabric, srp_daemon checks if it is a target. When there is a change of capabilities srp_daemon checks if the machine had become a target. When there is an SA change or a timeout expiration srp_daemon performs a full rescan of the fabric.

for each target srp_daemon finds, it checks if it is already connected to that port, if it is not connected, srp_daemon can either print the target details or connect to it.

.SH OPTIONS

.PP
.TP
\fB\-v\fR
Print more verbose output
.TP
\fB\-V\fR
Print even more verbose output (debug mode)
.TP
\fB\-i\fR \fIinfiniband-device\fR
Work on \fIinfiniband-device\fR. This option should not be used with -d.
.TP
\fB\-p\fR \fIport-num\fR
Work on port \fIport-num\fR (default 1). This option must be used with -i and should not be used with -d.
.TP
\fB\-d\fR \fIumad-device\fR
Use device file \fIumad-device\fR (default /dev/infiniband/umad0) This option should not be used with -i or -p.
.TP
\fB\-c\fR
Generate output suitable for piping directly to a
/sys/class/infiniband_srp/srp\-<device>\-<port>/add_target file. 
.TP
\fB\-e\fR
Execute the connection command, and will connect to the target.
.TP
\fB\-o\fR
srp_daemon executes only One rescan and exits. (The same as ibsrpdm)
.TP
\fB\-R\fR \fIRescan-time\fR
Performs complete Rescan every \fIRescan-time\fR seconds (default - perform no time oriented rescan).
.TP
\fB\-t\fR \fItimoeout\fR
Use \fItimoeout\fR for mad response in mili-Seconds. (default - 5 Seconds)
.TP
\fB\-r\fR \fIretries\fR
Perform \fIretries\fR Retries on each send to mad. (default - 3 times)

.SH EXAMPLES
srp_daemon -e -i mthca0 -p 1 -R 60 (Will connect to the targets accessible through port 1 of mthca0. will do a complete rescan every minute)
srp_daemon -o -c (will print the connection commands for the targets in the fabric and exit - similar to ibsrpdm)

.SH AUTHORS
.TP
Roland Dreier
.RI < rolandd@cisco.com >
.TP
Ishai Rabinovitz
.RI < ishai@mellanox.co.il >
