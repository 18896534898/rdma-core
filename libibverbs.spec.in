# $Id$

%define prefix /usr
%define ver      @VERSION@
%define  RELEASE 1
%define  rel     %{?CUSTOM_RELEASE} %{!?CUSTOM_RELEASE:%RELEASE}

Summary: InfiniBand verbs library
Name: libibverbs
Version: %ver
Release: %rel
Copyright: Dual GPL/BSD
Group: System Environment/Libraries
BuildRoot: %{_tmppath}/%{name}-%{version}-root
Source: http://openib.org/downloads/%{name}-%{version}.tar.gz
Url: http://openib.org/

%description
In conjunction with the OpenIB kernel drivers, libibverbs provides an
InfiniBand verbs API to userspace applications.

%package devel
Summary: InfiniBand verbs library development files
Group: System Environment/Libraries

%description devel
Static libraries and header files for the OpenIB verbs library.

%prep
%setup -q

%build
%configure
make

%install
make DESTDIR=${RPM_BUILD_ROOT} install
# remove unpackaged files from the buildroot
rm -f $RPM_BUILD_ROOT%{_libdir}/*.la

%clean
rm -rf $RPM_BUILD_ROOT

%files
%defattr(-,root,root)
%{_libdir}/libibverbs*.so.*
%doc AUTHORS COPYING ChangeLog NEWS README

%files devel
%defattr(-,root,root)
%{_libdir}/lib*.so
%{_libdir}/*.a
%{prefix}/include/*
